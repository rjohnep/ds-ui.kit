import React from 'react';
import '@testing-library/jest-dom/extend-expect';
import 'jest-styled-components';

import makeRendererWithTheme from 'utils/makeRendererWithTheme';
import { theme as freshaTheme } from 'themes/Fresha';
import { theme as partnersTheme } from 'themes/Partners';

import {{ properCase name }} from '../{{ properCase name }}';

describe('<{{ properCase name }} />', () => {
  it('Expect to not log errors in console', () => {
    const spy = jest.spyOn(global.console, 'error');
    makeRendererWithTheme(() => <{{ properCase name }}>Hola</{{ properCase name }}>);

    expect(spy).not.toHaveBeenCalled();
  });

  describe('UI Regression', () => {
    const regressionTests = (...themes) => {
      it('should render correctly primary variant', () => {
        const renderer = makeRendererWithTheme(
          () => <{{ properCase name }}>{{ properCase name }}</{{ properCase name }}>,
          ...themes
        );

        expect(renderer).toMatchSnapshot();
      });
    };

    describe('Base theme', () => {
      regressionTests();
    });

    describe('Fresha theme', () => {
      regressionTests(freshaTheme);
    });

    describe('Fresha Mobile theme', () => {
      regressionTests(freshaTheme, freshaTheme.mobile);
    });

    describe('Partners theme', () => {
      regressionTests(partnersTheme);
    });
  });
});
